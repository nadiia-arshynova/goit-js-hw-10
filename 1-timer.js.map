{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["\nimport flatpickr from \"flatpickr\";\n\nimport \"flatpickr/dist/flatpickr.min.css\";\n\nconst input = document.querySelector(\"#datetime-picker\");\nconst startBtn = document.querySelector([\"[data-start]\"]);\n\nconst daysEl = document.querySelector(\"[data-days]\");\nconst hoursEl = document.querySelector(\"[data-hours]\");\nconst minutesEl = document.querySelector(\"[data-minutes]\");\nconst secondsEl = document.querySelector(\"[data-seconds]\");\n\n\nlet userSelectedDate = null;\nlet timerId = null;\nstartBtn.disabled = true;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n   const pickedDate = selectedDates[0];\n\n   if (!pickedDate) {\n    startBtn.disabled = true;\n    return;\n   }\n\n   if (pickedDate.getTime() <= Date.now()) {\n    window.alert(\"Please choose a date in the future\");\n    startBtn.disabled = true;\n    return;\n   }\n\n   userSelectedDate = pickedDate;\n   startBtn.disabled = false;\n  }\n};\n\nflatpickr(input, options);\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = pad(Math.floor(ms / day));\n  // Remaining hours\n  const hours = pad(Math.floor((ms % day) / hour));\n  // Remaining minutes\n  const minutes = pad(Math.floor(((ms % day) % hour) / minute));\n  // Remaining seconds\n  const seconds = pad(Math.floor((((ms % day) % hour) % minute) / second));\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction pad(value) {\n    return String(value).padStart(2, \"0\");\n  }\n\nconsole.log(convertMs(2000)); // {days: 0, hours: 0, minutes: 0, seconds: 2}\nconsole.log(convertMs(140000)); // {days: 0, hours: 0, minutes: 2, seconds: 20}\nconsole.log(convertMs(24140000)); // {days: 0, hours: 6 minutes: 42, seconds: 20}\n\nfunction clearTimer() {\nif (timerId) {\n    clearInterval(timerId);\n    timerId = null;\n}\n};\n\nfunction updateTimer({ days, hours, minutes, seconds}) {\ndaysEl.textContent = days;\nhoursEl.textContent = hours;\nminutesEl.textContent = minutes;\nsecondsEl.textContent = seconds;\n}\n\nstartBtn.addEventListener(\"click\", () => {\n    if (!userSelectedDate) return;\n\n    startBtn.disabled = true;\n    input.disabled = true;\n\n    clearTimer();\n\n    timerId = setInterval(() => {\n      const now = Date.now();\n      const deltaTime = userSelectedDate - now;\n\n      if (deltaTime <= 0) {\n        clearTimer();\n        updateTimer({ days: \"00\", hours: \"00\", minutes: \"00\", seconds: \"00\"});\n        input.disabled = false;\n        return;\n      }\n       const timeLeft = convertMs(deltaTime);\n       updateTimer(timeLeft);\n\n    }, 1000);\n    \n});\n\n"],"names":["input","startBtn","daysEl","hoursEl","minutesEl","secondsEl","userSelectedDate","timerId","options","selectedDates","pickedDate","flatpickr","convertMs","ms","days","pad","hours","minutes","seconds","value","clearTimer","updateTimer","now","deltaTime","timeLeft"],"mappings":"wIAKA,MAAMA,EAAQ,SAAS,cAAc,kBAAkB,EACjDC,EAAW,SAAS,cAAc,CAAC,cAAc,CAAC,EAElDC,EAAS,SAAS,cAAc,aAAa,EAC7CC,EAAU,SAAS,cAAc,cAAc,EAC/CC,EAAY,SAAS,cAAc,gBAAgB,EACnDC,EAAY,SAAS,cAAc,gBAAgB,EAGzD,IAAIC,EAAmB,KACnBC,EAAU,KACdN,EAAS,SAAW,GAEpB,MAAMO,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACtB,MAAMC,EAAaD,EAAc,CAAC,EAElC,GAAI,CAACC,EAAY,CAChBT,EAAS,SAAW,GACpB,MACD,CAEA,GAAIS,EAAW,QAAO,GAAM,KAAK,IAAG,EAAI,CACvC,OAAO,MAAM,oCAAoC,EACjDT,EAAS,SAAW,GACpB,MACD,CAEAK,EAAmBI,EACnBT,EAAS,SAAW,EACrB,CACF,EAEAU,EAAUX,EAAOQ,CAAO,EAExB,SAASI,EAAUC,EAAI,CAQrB,MAAMC,EAAOC,EAAI,KAAK,MAAMF,EAAK,KAAG,CAAC,EAE/BG,EAAQD,EAAI,KAAK,MAAOF,EAAK,MAAO,IAAI,CAAC,EAEzCI,EAAUF,EAAI,KAAK,MAAQF,EAAK,MAAO,KAAQ,GAAM,CAAC,EAEtDK,EAAUH,EAAI,KAAK,MAASF,EAAK,MAAO,KAAQ,IAAU,GAAM,CAAC,EAEvE,MAAO,CAAE,KAAAC,EAAM,MAAAE,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASH,EAAII,EAAO,CAChB,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC,CAEF,QAAQ,IAAIP,EAAU,GAAI,CAAC,EAC3B,QAAQ,IAAIA,EAAU,IAAM,CAAC,EAC7B,QAAQ,IAAIA,EAAU,MAAQ,CAAC,EAE/B,SAASQ,GAAa,CAClBb,IACA,cAAcA,CAAO,EACrBA,EAAU,KAEd,CAEA,SAASc,EAAY,CAAE,KAAAP,EAAM,MAAAE,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAG,CACvDhB,EAAO,YAAcY,EACrBX,EAAQ,YAAca,EACtBZ,EAAU,YAAca,EACxBZ,EAAU,YAAca,CACxB,CAEAjB,EAAS,iBAAiB,QAAS,IAAM,CAChCK,IAELL,EAAS,SAAW,GACpBD,EAAM,SAAW,GAEjBoB,EAAU,EAEVb,EAAU,YAAY,IAAM,CAC1B,MAAMe,EAAM,KAAK,IAAG,EACdC,EAAYjB,EAAmBgB,EAErC,GAAIC,GAAa,EAAG,CAClBH,EAAU,EACVC,EAAY,CAAE,KAAM,KAAM,MAAO,KAAM,QAAS,KAAM,QAAS,IAAI,CAAC,EACpErB,EAAM,SAAW,GACjB,MACF,CACC,MAAMwB,EAAWZ,EAAUW,CAAS,EACpCF,EAAYG,CAAQ,CAEvB,EAAG,GAAI,EAEX,CAAC"}